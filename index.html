<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>PhantomBlog Â· EquinoxX</title>
<!-- å¼•å…¥å­—ä½“æå‡è´¨æ„Ÿ -->
<link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
<style>
/* ================= å…¨å±€é‡ç½® & åŸºç¡€å˜é‡ ================= */
:root {
  /* æš—é»‘æ¨¡å¼ï¼ˆä¸»è‰²è°ƒï¼šå†·è°ƒæ·±è“+é’è“æ¸å˜ï¼Œé«˜çº§æ„Ÿæ‹‰æ»¡ï¼‰ */
  --bg-primary: #0a0e17;
  --bg-secondary: #111827;
  --bg-card: rgba(17, 25, 40, 0.85);
  --bg-nav: rgba(17, 25, 40, 0.9);
  --border-light: rgba(129, 140, 163, 0.15);
  --text-primary: #f9fafb;
  --text-muted: #94a3b8;
  --accent-primary: #22d3ee;
  --accent-secondary: #6366f1;
  --accent-gradient: linear-gradient(135deg, var(--accent-secondary), var(--accent-primary));
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.1);
  --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.15);
  --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.2);
  --radius-sm: 8px;
  --radius-md: 16px;
  --radius-lg: 24px;
  --radius-full: 9999px;
  --transition-fast: 0.2s ease;
  --transition-normal: 0.4s ease;
  --transition-slow: 0.8s ease;
}

body.light {
  /* äº®è‰²æ¨¡å¼ï¼ˆæŸ”å’Œæµ…è“+æ¸…æ–°é’è°ƒï¼Œæ— åˆºçœ¼ç™½ï¼‰ */
  --bg-primary: #f8fafc;
  --bg-secondary: #ffffff;
  --bg-card: rgba(255, 255, 255, 0.9);
  --bg-nav: rgba(255, 255, 255, 0.95);
  --border-light: rgba(148, 163, 184, 0.2);
  --text-primary: #0f172a;
  --text-muted: #64748b;
  --accent-primary: #3b82f6;
  --accent-secondary: #06b6d4;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
  font-family: 'Inter', "PingFang SC", "Microsoft YaHei", Arial, sans-serif;
}

html {
  scroll-behavior: smooth;
  scroll-padding-top: 80px; /* é€‚é…ç²˜æ€§å¯¼èˆª */
}

body {
  background: var(--bg-primary);
  color: var(--text-primary);
  overflow-x: hidden;
  line-height: 1.6;
  transition: all var(--transition-normal);
}

/* ç²’å­ç”»å¸ƒå±‚çº§ & æ€§èƒ½ä¼˜åŒ– */
canvas#bg {
  position: fixed;
  inset: 0;
  z-index: -2;
  pointer-events: none; /* ä¸é˜»æŒ¡äº¤äº’ */
}

/* ================= å¯¼èˆªæ ï¼ˆæ¡Œé¢+ç§»åŠ¨ç«¯ï¼‰ ================= */
nav {
  position: sticky;
  top: 0;
  z-index: 999;
  backdrop-filter: blur(20px);
  background: var(--bg-nav);
  border-bottom: 1px solid var(--border-light);
  padding: 0 2rem;
  box-shadow: var(--shadow-sm);
}

.nav-container {
  max-width: 1400px;
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
  height: 72px;
}

/* æ¡Œé¢ç«¯å¯¼èˆªé“¾æ¥ */
.nav-links {
  display: flex;
  gap: 2.5rem;
}

.nav-links a {
  color: var(--text-primary);
  text-decoration: none;
  font-weight: 500;
  font-size: 1rem;
  position: relative;
  padding: 0.5rem 0;
  transition: color var(--transition-fast);
}

.nav-links a:hover {
  color: var(--accent-primary);
}

.nav-links a::after {
  content: "";
  position: absolute;
  bottom: 0;
  left: 0;
  width: 0;
  height: 2px;
  background: var(--accent-gradient);
  border-radius: var(--radius-sm);
  transition: width var(--transition-normal);
}

.nav-links a:hover::after {
  width: 100%;
}

/* ä¸»é¢˜åˆ‡æ¢æŒ‰é’® */
#themeBtn {
  cursor: pointer;
  font-size: 1.2rem;
  background: transparent;
  border: none;
  color: var(--text-primary);
  padding: 0.5rem 1rem;
  border-radius: var(--radius-sm);
  transition: background var(--transition-fast);
}

#themeBtn:hover {
  background: rgba(129, 140, 163, 0.1);
}

/* ç§»åŠ¨ç«¯æ±‰å ¡èœå• */
.hamburger {
  display: none;
  cursor: pointer;
  font-size: 1.5rem;
  background: transparent;
  border: none;
  color: var(--text-primary);
}

/* ç§»åŠ¨ç«¯æŠ˜å å¯¼èˆª */
.mobile-nav {
  position: fixed;
  top: 72px;
  left: 0;
  right: 0;
  background: var(--bg-nav);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border-light);
  padding: 1.5rem 2rem;
  display: none;
  flex-direction: column;
  gap: 1.5rem;
  box-shadow: var(--shadow-md);
  z-index: 998;
}

.mobile-nav.active {
  display: flex;
}

/* ================= é¦–é¡µå¤´éƒ¨ ================= */
header#home {
  min-height: calc(100vh - 72px);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  text-align: center;
  padding: 2rem;
}

header h1 {
  font-size: clamp(2.8rem, 6vw, 5rem); /* å“åº”å¼å­—ä½“ */
  font-weight: 700;
  background: var(--accent-gradient);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 1.5rem;
  letter-spacing: -0.02em;
}

header p {
  font-size: clamp(1rem, 2vw, 1.25rem);
  color: var(--text-muted);
  max-width: 600px;
}

/* ================= å…³äºæˆ‘åŒºåŸŸ ================= */
section#about.intro {
  max-width: 800px;
  margin: 8rem auto;
  padding: 0 2rem;
  text-align: center;
}

/* å¤´åƒå®¹å™¨ï¼ˆé«˜çº§æ—‹è½¬æ¸å˜è¾¹æ¡†ï¼‰ */
.avatar-wrapper {
  width: clamp(150px, 20vw, 200px);
  height: clamp(150px, 20vw, 200px);
  margin: 0 auto 2rem;
  border-radius: 50%;
  background: var(--accent-gradient);
  animation: spin 12s linear infinite;
  padding: 4px;
  box-shadow: 0 0 40px rgba(34, 211, 238, 0.15);
}

@keyframes spin {
  to { transform: rotate(360deg); }
}

.avatar-inner {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  background: var(--bg-primary);
  padding: 5px;
}

.avatar {
  width: 100%;
  height: 100%;
  border-radius: 50%;
  object-fit: cover;
  transition: transform var(--transition-normal);
}

.avatar-wrapper:hover .avatar {
  transform: scale(1.02);
}

/* åå­— & åˆ«å */
.name {
  font-size: clamp(1.8rem, 3vw, 2.5rem);
  font-weight: 600;
  margin-bottom: 0.5rem;
}

.alias {
  color: var(--text-muted);
  margin-bottom: 1.5rem;
}

/* æ ‡ç­¾æ ·å¼ï¼ˆé«˜çº§èƒ¶å›Šï¼‰ */
.tags {
  margin: 2rem 0;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 0.8rem;
}

.tags span {
  padding: 0.5rem 1.2rem;
  border-radius: var(--radius-full);
  background: rgba(129, 140, 163, 0.1);
  border: 1px solid var(--border-light);
  color: var(--text-muted);
  font-size: 0.9rem;
  transition: all var(--transition-fast);
}

.tags span:hover {
  background: rgba(34, 211, 238, 0.1);
  color: var(--accent-primary);
  border-color: rgba(34, 211, 238, 0.2);
}

/* ç¤¾äº¤é“¾æ¥ï¼ˆæ¸å˜æŒ‰é’®ï¼‰ */
.social {
  margin: 2.5rem 0;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 1rem;
}

.social a {
  padding: 0.7rem 1.5rem;
  border-radius: var(--radius-full);
  background: transparent;
  border: 1px solid var(--border-light);
  color: var(--accent-primary);
  text-decoration: none;
  font-weight: 500;
  font-size: 0.95rem;
  position: relative;
  overflow: hidden;
  transition: all var(--transition-normal);
}

/* æŒ‰é’®æ¸å˜èƒŒæ™¯åŠ¨ç”» */
.social a::before {
  content: "";
  position: absolute;
  inset: 0;
  background: var(--accent-gradient);
  opacity: 0;
  transition: opacity var(--transition-normal);
  z-index: -1;
}

.social a:hover {
  color: var(--text-primary);
  border-color: transparent;
  box-shadow: 0 0 25px rgba(34, 211, 238, 0.2);
  transform: translateY(-3px);
}

.social a:hover::before {
  opacity: 1;
}

/* è®¿é—®ä¿¡æ¯ï¼ˆå¼±åŒ–æ˜¾ç¤ºï¼‰ */
#visitInfo, #counter {
  font-size: 0.85rem;
  color: var(--text-muted);
  margin-top: 1rem;
  line-height: 1.5;
}

/* ================= æ–‡ç« åˆ—è¡¨ ================= */
section#posts.container {
  max-width: 1000px;
  margin: 8rem auto;
  padding: 0 2rem;
}

/* æ–‡ç« å¡ç‰‡ï¼ˆé«˜çº§æ¯›ç»ç’ƒï¼‰ */
.card {
  background: var(--bg-card);
  border: 1px solid var(--border-light);
  border-radius: var(--radius-md);
  padding: 2rem;
  backdrop-filter: blur(20px);
  margin-bottom: 2rem;
  box-shadow: var(--shadow-sm);
  transition: all var(--transition-normal);
}

.card:hover {
  transform: translateY(-6px);
  box-shadow: var(--shadow-lg);
  border-color: rgba(34, 211, 238, 0.2);
}

.card h2 {
  font-size: 1.5rem;
  font-weight: 600;
  background: var(--accent-gradient);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  margin-bottom: 0.8rem;
}

.meta {
  color: var(--text-muted);
  font-size: 0.9rem;
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.meta::before {
  content: "";
  width: 4px;
  height: 4px;
  border-radius: 50%;
  background: var(--accent-primary);
}

/* ================= å›¾ç‰‡ç”»å»Š ================= */
section#gallery.container {
  max-width: 1200px;
  margin: 8rem auto;
  padding: 0 2rem;
}

section#gallery h2 {
  font-size: clamp(1.5rem, 3vw, 2rem);
  font-weight: 600;
  margin-bottom: 2rem;
  background: var(--accent-gradient);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
}

/* ç”»å»Šç½‘æ ¼ï¼ˆå“åº”å¼ï¼‰ */
.gallery {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(clamp(180px, 20vw, 250px), 1fr));
  gap: 1.5rem;
}

.gallery img {
  width: 100%;
  border-radius: var(--radius-sm);
  aspect-ratio: 1/1;
  object-fit: cover;
  padding: 3px;
  background: var(--accent-gradient);
  transition: all var(--transition-normal);
  cursor: pointer;
}

.gallery img:hover {
  transform: scale(1.05);
  box-shadow: 0 0 30px rgba(34, 211, 238, 0.2);
}

/* ================= é¡µè„š ================= */
footer#contact {
  text-align: center;
  padding: 4rem 2rem;
  color: var(--text-muted);
  font-size: 0.9rem;
  border-top: 1px solid var(--border-light);
  margin-top: 8rem;
  background: rgba(17, 25, 40, 0.5);
  backdrop-filter: blur(10px);
}

/* ================= æ¸æ˜¾åŠ¨ç”» ================= */
.reveal {
  opacity: 0;
  transform: translateY(30px);
  transition: opacity var(--transition-slow), transform var(--transition-slow);
}

.reveal.active {
  opacity: 1;
  transform: translateY(0);
}

/* ================= å“åº”å¼æ–­ç‚¹ï¼ˆç²¾ç»†é€‚é…ï¼‰ ================= */
/* å¹³æ¿ï¼ˆ768pxä»¥ä¸‹ï¼‰ */
@media (max-width: 768px) {
  .nav-links {
    display: none;
  }
  .hamburger {
    display: block;
  }
  .social {
    gap: 0.8rem;
  }
  .social a {
    padding: 0.6rem 1.2rem;
    font-size: 0.9rem;
  }
  section#about.intro,
  section#posts.container,
  section#gallery.container {
    margin: 5rem auto;
  }
}

/* æ‰‹æœºï¼ˆ480pxä»¥ä¸‹ï¼‰ */
@media (max-width: 480px) {
  nav {
    padding: 0 1rem;
  }
  .mobile-nav {
    padding: 1.2rem 1rem;
  }
  header#home {
    padding: 1rem;
  }
  .card {
    padding: 1.5rem;
  }
  .gallery {
    gap: 1rem;
  }
}

/* ================= åŠ è½½åŠ¨ç”»ï¼ˆå¯é€‰ï¼‰ ================= */
@keyframes fadeIn {
  from { opacity: 0; }
  to { opacity: 1; }
}

body {
  animation: fadeIn 0.8s ease;
}
</style>
</head>
<body>
<canvas id="bg"></canvas>

<!-- å¯¼èˆªæ  -->
<nav>
  <div class="nav-container">
    <div class="nav-links">
      <a href="#home">é¦–é¡µ</a>
      <a href="#about">å…³äº</a>
      <a href="#posts">æ–‡ç« </a>
      <a href="#gallery">ç”»å»Š</a>
      <a href="#contact">è”ç³»</a>
    </div>
    <button id="themeBtn">ğŸŒ—</button>
    <button class="hamburger" id="hamburgerBtn">â˜°</button>
  </div>
  <!-- ç§»åŠ¨ç«¯æŠ˜å å¯¼èˆª -->
  <div class="mobile-nav" id="mobileNav">
    <a href="#home">é¦–é¡µ</a>
    <a href="#about">å…³äº</a>
    <a href="#posts">æ–‡ç« </a>
    <a href="#gallery">ç”»å»Š</a>
    <a href="#contact">è”ç³»</a>
  </div>
</nav>

<!-- é¦–é¡µå¤´éƒ¨ -->
<header id="home">
  <h1>PhantomBlog</h1>
  <p>EquinoxX è®¾è®¡çš„æç®€é«˜çº§åšå®¢ âœ¨</p>
</header>

<!-- å…³äºæˆ‘ -->
<section id="about" class="intro reveal">
  <div class="avatar-wrapper">
    <div class="avatar-inner">
      <img class="avatar" src="avatar.jpg" alt="EquinoxX å¤´åƒ">
    </div>
  </div>
  <h2 class="name">EquinoxX</h2>
  <div class="alias">æ›¾ç”¨åï¼šBo1tLightning Â· Talismanity</div>
  <p>ä¸­å›½ Â· è¾½å® ï½œ æ‰“æ¸¸æˆ Â· ç¼–ç¨‹</p>

  <div class="tags">
    <span>Apex</span>
    <span>COD</span>
    <span>CODM</span>
    <span>Deadlock</span>
    <span>CS2</span>
  </div>

  <div class="social">
    <a target="_blank" href="https://github.com/BoltLightningAlan">GitHub</a>
    <a target="_blank" href="https://space.bilibili.com/572435740">Bilibili</a>
    <a target="_blank" href="https://www.youtube.com/@Talismanity">YouTube</a>
    <a target="_blank" href="mailto:sunshaoxuan2019@163.com">Email</a>
  </div>

  <p id="visitInfo"></p>
  <p id="counter"></p>
</section>

<!-- æ–‡ç« åˆ—è¡¨ -->
<section id="posts" class="container">
  <div id="postList"></div>
</section>

<!-- å›¾ç‰‡ç”»å»Š -->
<section id="gallery" class="container reveal">
  <h2>å›¾ç‰‡ç”»å»Š</h2>
  <div class="gallery" id="galleryBox"></div>
</section>

<!-- é¡µè„š -->
<footer id="contact">Â© 2026 PhantomBlog Â· æç®€é«˜çº§è®¾è®¡</footer>

<script>
/* ===== 1. è¶…ç‚«é…·ç²’å­èƒŒæ™¯ï¼ˆæ”¯æŒé¼ æ ‡äº¤äº’+æ¸å˜+è¿çº¿ï¼‰ ===== */
class ParticleGalaxy {
  constructor() {
    this.canvas = document.getElementById('bg');
    this.ctx = this.canvas.getContext('2d');
    this.width = window.innerWidth;
    this.height = window.innerHeight;
    this.particles = [];
    this.mouse = { x: null, y: null, radius: 150 }; // é¼ æ ‡æ„Ÿåº”èŒƒå›´
    this.particleCount = this.isMobile() ? 150 : 400; // ç§»åŠ¨ç«¯å‡å°‘ç²’å­æ•°æå‡æ€§èƒ½
    this.init();
  }

  // æ£€æµ‹ç§»åŠ¨ç«¯
  isMobile() {
    return /Mobi|Android|iPhone/i.test(navigator.userAgent);
  }

  // åˆå§‹åŒ–ç”»å¸ƒå’Œç²’å­
  init() {
    this.canvas.width = this.width;
    this.canvas.height = this.height;
    this.createParticles();
    this.addEventListeners();
    this.animate();
  }

  // åˆ›å»ºç²’å­ï¼ˆéšæœºå±æ€§+æ¸å˜é¢œè‰²ï¼‰
  createParticles() {
    this.particles = [];
    const isLight = document.body.classList.contains('light');
    for (let i = 0; i < this.particleCount; i++) {
      const size = Math.random() * 1.5 + 0.2; // ç²’å­å¤§å°æ›´ç»†è…»
      this.particles.push({
        x: Math.random() * this.width,
        y: Math.random() * this.height,
        size,
        speedX: (Math.random() - 0.5) * 0.3, // é€Ÿåº¦æ”¾ç¼“æ›´ä¸æ»‘
        speedY: (Math.random() - 0.5) * 0.3,
        color: isLight 
          ? `rgba(${100 + Math.random() * 80}, ${150 + Math.random() * 80}, ${255}, ${0.6 + Math.random() * 0.4})`
          : `rgba(${34 + Math.random() * 50}, ${211 + Math.random() * 20}, ${238}, ${0.4 + Math.random() * 0.6})`,
        alpha: Math.random() * 0.8 + 0.2,
        originalAlpha: Math.random() * 0.8 + 0.2
      });
    }
  }

  // äº‹ä»¶ç›‘å¬ï¼ˆçª—å£å¤§å°+é¼ æ ‡+ä¸»é¢˜åˆ‡æ¢ï¼‰
  addEventListeners() {
    window.addEventListener('resize', () => {
      this.width = window.innerWidth;
      this.height = window.innerHeight;
      this.canvas.width = this.width;
      this.canvas.height = this.height;
      this.createParticles();
    });

    // é¼ æ ‡ç§»åŠ¨è·Ÿè¸ªï¼ˆç§»åŠ¨ç«¯è§¦æ‘¸é€‚é…ï¼‰
    if (this.isMobile()) {
      window.addEventListener('touchmove', (e) => {
        this.mouse.x = e.touches[0].clientX;
        this.mouse.y = e.touches[0].clientY;
      });
      window.addEventListener('touchend', () => {
        this.mouse.x = null;
        this.mouse.y = null;
      });
    } else {
      window.addEventListener('mousemove', (e) => {
        this.mouse.x = e.clientX;
        this.mouse.y = e.clientY;
      });
    }

    // ä¸»é¢˜åˆ‡æ¢æ—¶æ›´æ–°ç²’å­é¢œè‰²
    document.getElementById('themeBtn').addEventListener('click', () => {
      this.createParticles();
    });
  }

  // ç»˜åˆ¶ç²’å­å’Œè¿çº¿
  draw() {
    this.ctx.clearRect(0, 0, this.width, this.height);
    this.particles.forEach((particle, index) => {
      // ç»˜åˆ¶ç²’å­
      this.ctx.beginPath();
      this.ctx.arc(particle.x, particle.y, particle.size, 0, Math.PI * 2);
      this.ctx.fillStyle = particle.color.replace(/[^,]+(?=\))/, particle.alpha);
      this.ctx.fill();

      // ç²’å­ç§»åŠ¨
      particle.x += particle.speedX;
      particle.y += particle.speedY;

      // è¾¹ç•Œå›å¼¹
      if (particle.x < 0 || particle.x > this.width) particle.speedX *= -1;
      if (particle.y < 0 || particle.y > this.height) particle.speedY *= -1;

      // é¼ æ ‡äº¤äº’ï¼šç²’å­é è¿‘é¼ æ ‡æ—¶æ”¾å¤§+å˜äº®
      if (this.mouse.x && this.mouse.y) {
        const dx = this.mouse.x - particle.x;
        const dy = this.mouse.y - particle.y;
        const distance = Math.sqrt(dx * dx + dy * dy);
        
        // ç²’å­ç¼©æ”¾
        if (distance < this.mouse.radius) {
          const scale = 1 + (this.mouse.radius - distance) / this.mouse.radius;
          particle.size = Math.random() * 1.5 * scale + 0.2;
          particle.alpha = particle.originalAlpha * scale;
        } else {
          particle.size = Math.random() * 1.5 + 0.2;
          particle.alpha = particle.originalAlpha;
        }

        // ç²’å­è¿çº¿ï¼ˆä»…é¼ æ ‡é™„è¿‘ï¼‰
        if (distance < this.mouse.radius / 2) {
          this.particles.forEach((particle2, index2) => {
            if (index !== index2) {
              const dx2 = particle.x - particle2.x;
              const dy2 = particle.y - particle2.y;
              const distance2 = Math.sqrt(dx2 * dx2 + dy2 * dy2);
              if (distance2 < 80) { // è¿çº¿æœ€å¤§è·ç¦»
                const opacity = 1 - (distance2 / 80);
                this.ctx.beginPath();
                this.ctx.strokeStyle = `rgba(34, 211, 238, ${opacity * 0.2})`;
                this.ctx.lineWidth = 0.5;
                this.ctx.moveTo(particle.x, particle.y);
                this.ctx.lineTo(particle2.x, particle2.y);
                this.ctx.stroke();
              }
            }
          });
        }
      }
    });
  }

  // åŠ¨ç”»å¾ªç¯ï¼ˆæ€§èƒ½ä¼˜åŒ–ï¼šrequestAnimationFrameï¼‰
  animate() {
    this.draw();
    requestAnimationFrame(() => this.animate());
  }
}

/* ===== 2. ç§»åŠ¨ç«¯æ±‰å ¡èœå•äº¤äº’ ===== */
function initMobileNav() {
  const hamburgerBtn = document.getElementById('hamburgerBtn');
  const mobileNav = document.getElementById('mobileNav');
  
  hamburgerBtn.addEventListener('click', () => {
    mobileNav.classList.toggle('active');
    // åˆ‡æ¢æ±‰å ¡/å…³é—­å›¾æ ‡
    hamburgerBtn.innerText = mobileNav.classList.contains('active') ? 'âœ•' : 'â˜°';
  });

  // ç‚¹å‡»å¯¼èˆªé“¾æ¥å…³é—­èœå•
  const mobileLinks = mobileNav.querySelectorAll('a');
  mobileLinks.forEach(link => {
    link.addEventListener('click', () => {
      mobileNav.classList.remove('active');
      hamburgerBtn.innerText = 'â˜°';
    });
  });
}

/* ===== 3. æ¸æ˜¾åŠ¨ç”» ===== */
function initRevealAnimation() {
  const reveals = document.querySelectorAll('.reveal');
  
  function reveal() {
    reveals.forEach(el => {
      const windowHeight = window.innerHeight;
      const elementTop = el.getBoundingClientRect().top;
      const elementVisible = 100; // å…ƒç´ è¿›å…¥å¯è§†åŒºåŸŸ100pxåæ˜¾ç¤º
      
      if (elementTop < windowHeight - elementVisible) {
        el.classList.add('active');
      }
    });
  }

  window.addEventListener('scroll', reveal);
  reveal(); // åˆå§‹åŠ è½½æ—¶æ‰§è¡Œä¸€æ¬¡
}

/* ===== 4. ä¸»é¢˜åˆ‡æ¢ ===== */
function initThemeToggle() {
  const themeBtn = document.getElementById('themeBtn');
  
  // è¯»å–æœ¬åœ°å­˜å‚¨çš„ä¸»é¢˜åå¥½
  const savedTheme = localStorage.getItem('theme');
  if (savedTheme === 'light') {
    document.body.classList.add('light');
  }

  themeBtn.addEventListener('click', () => {
    document.body.classList.toggle('light');
    // ä¿å­˜ä¸»é¢˜åå¥½åˆ°æœ¬åœ°å­˜å‚¨
    const isLight = document.body.classList.contains('light');
    localStorage.setItem('theme', isLight ? 'light' : 'dark');
  });
}

/* ===== 5. è®¿é—®è®¡æ•° ===== */
function initVisitCounter() {
  let visitCount = localStorage.getItem('visit') || 0;
  visitCount++;
  localStorage.setItem('visit', visitCount);
  document.getElementById('counter').innerText = `è®¿é—®æ¬¡æ•°ï¼š${visitCount}`;
}

/* ===== 6. è®¾å¤‡ä¿¡æ¯å±•ç¤º ===== */
function initVisitInfo() {
  const userAgent = navigator.userAgent;
  const screenRes = `${screen.width}x${screen.height}`;
  // ç®€åŒ–UAæ˜¾ç¤ºï¼ˆç§»åŠ¨ç«¯åªæ˜¾ç¤ºæ ¸å¿ƒä¿¡æ¯ï¼‰
  const simplifiedUA = /Mobi|Android|iPhone/i.test(userAgent) 
    ? userAgent.match(/(iPhone|Android|iPad|iOS|Mobile)/)[0] + ' è®¾å¤‡'
    : 'æ¡Œé¢ç«¯è®¾å¤‡';
  
  document.getElementById('visitInfo').innerText = 
    `è®¾å¤‡ç±»å‹ï¼š${simplifiedUA} Â· åˆ†è¾¨ç‡ï¼š${screenRes}`;
}

/* ===== 7. åŠ è½½æ–‡ç« åˆ—è¡¨ ===== */
function loadPosts() {
  // æ¨¡æ‹Ÿposts.jsonæ•°æ®ï¼ˆå¦‚æœæœ‰çœŸå®æ–‡ä»¶å¯æ›¿æ¢ä¸ºfetchï¼‰
  const mockPosts = [
    { title: 'æˆ‘çš„ç¼–ç¨‹å­¦ä¹ ä¹‹è·¯', date: '2026-01-15', category: 'ç¼–ç¨‹', desc: 'ä»é›¶åŸºç¡€åˆ°ç‹¬ç«‹å¼€å‘åšå®¢ï¼Œåˆ†äº«æˆ‘çš„å­¦ä¹ ç»éªŒå’Œè¸©å‘è®°å½•ã€‚' },
    { title: 'Apexè‹±é›„èº«æ³•æ•™å­¦', date: '2026-01-10', category: 'æ¸¸æˆ', desc: 'è¯¦ç»†è®²è§£Apexä¸­çš„æ»‘é“²ã€è¶…çº§è·³ã€èº«æ³•è¿æ‹›ï¼Œæ–°æ‰‹ä¹Ÿèƒ½å¿«é€Ÿä¸Šæ‰‹ã€‚' },
    { title: 'åšå®¢é‡æ„ï¼šä»ä¸‘åˆ°é«˜çº§çš„è®¾è®¡æ€è·¯', date: '2026-01-05', category: 'å‰ç«¯', desc: 'åˆ†äº«æœ¬æ¬¡åšå®¢è§†è§‰å‡çº§çš„æ ¸å¿ƒæ€è·¯ï¼ŒåŒ…æ‹¬é…è‰²ã€åŠ¨æ•ˆã€å“åº”å¼è®¾è®¡ã€‚' }
  ];

  const box = document.getElementById('postList');
  // å¦‚æœæœ‰çœŸå®çš„posts.jsonï¼Œæ›¿æ¢ä¸ºä¸‹é¢çš„fetchä»£ç ï¼š
  // fetch('posts.json').then(r => r.json()).then(list => {
    mockPosts.forEach(p => {
      box.innerHTML += `
        <article class="card reveal">
          <h2>${p.title}</h2>
          <div class="meta">${p.date} Â· ${p.category}</div>
          <p>${p.desc}</p>
        </article>`;
    });
    initRevealAnimation(); // é‡æ–°è§¦å‘æ¸æ˜¾åŠ¨ç”»
  // });
}

/* ===== 8. åŠ è½½ç”»å»Šå›¾ç‰‡ ===== */
function loadGallery() {
  const galleryBox = document.getElementById('galleryBox');
  const imgCount = isMobile() ? 30 : 60; // ç§»åŠ¨ç«¯å‡å°‘å›¾ç‰‡æ•°æå‡åŠ è½½é€Ÿåº¦
  
  for (let i = 1; i <= imgCount; i++) {
    const img = new Image();
    img.src = `pic/${i}.jpg`;
    img.alt = `ç”»å»Šå›¾ç‰‡ ${i}`;
    // å›¾ç‰‡åŠ è½½å¤±è´¥æ—¶æ˜¾ç¤ºå ä½å›¾
    img.onerror = () => {
      img.src = 'https://picsum.photos/250/250?random=' + i;
    };
    img.onload = () => {
      galleryBox.appendChild(img);
    };
  }
}

/* ===== å·¥å…·å‡½æ•°ï¼šæ£€æµ‹ç§»åŠ¨ç«¯ ===== */
function isMobile() {
  return /Mobi|Android|iPhone/i.test(navigator.userAgent);
}

/* ===== åˆå§‹åŒ–æ‰€æœ‰åŠŸèƒ½ ===== */
window.addEventListener('DOMContentLoaded', () => {
  new ParticleGalaxy(); // åˆå§‹åŒ–ç²’å­èƒŒæ™¯
  initMobileNav();      // åˆå§‹åŒ–ç§»åŠ¨ç«¯å¯¼èˆª
  initRevealAnimation();// åˆå§‹åŒ–æ¸æ˜¾åŠ¨ç”»
  initThemeToggle();    // åˆå§‹åŒ–ä¸»é¢˜åˆ‡æ¢
  initVisitCounter();   // åˆå§‹åŒ–è®¿é—®è®¡æ•°
  initVisitInfo();      // åˆå§‹åŒ–è®¾å¤‡ä¿¡æ¯
  loadPosts();          // åŠ è½½æ–‡ç« åˆ—è¡¨
  loadGallery();        // åŠ è½½ç”»å»Šå›¾ç‰‡
});
</script>
</body>
</html>